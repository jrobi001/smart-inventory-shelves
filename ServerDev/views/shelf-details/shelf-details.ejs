<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/css/shelfDetails.css">
</head>
<%- include('../includes/navigation.ejs') %>
<main>

    <div class="shelf-details">

        <div class="imagebox">
            <img src="<%= details.imageLink %>" alt="">
        </div>

        <div class="detailsbox">
            <h2><%= details.name %></h2>
            <p><%= details.tags %></p>
            <p>Price: Â£<%= details.price %></p>
        </div>

        <div class="position-box">
            <h2>shelf</h2>
            <h1><%= details.shelfPosition %></h1>
        </div>

        <div class="item-weight">
            <h2>weight</h1>
                <h1><%= details.weight %>g</h1>
        </div>

        <div class="settings-header">
            <h1>Details and settings</h1>
        </div>

        <div class="shelf-weight">

            <% if (weight == null) { %>
            <h2>No weight records available</h2>
            <% } else { %>
            <h2>Current shelf weight = <%= weight %></h2>
            <h2>Number of items left = <%= Math.round(weight / details.weight) %></h2>
            <% if (details.hundredPercent == null) { %>
            <h2>Percent full = not set</h2>
            <% } else { %>
            <h2>Percent full = <%= Math.round(weight / details.hundredPercent) %>%</h2>
            <% } %>
            <% } %>



            <br>
            <% if (details.thresholdType == 'NUMBER') { %>
            <h2>Warning type = number of items</h2>
            <h2>Warning limit = <%= details.thresholdValue %> items</h2>
            <% } else if(details.thresholdType == 'ABSOLUTE') { %>
            <h2>Warning type = absolute weight</h2>
            <h2>Warning limit = <%= details.thresholdValue %> g</h2>
            <% } else if(details.thresholdType == 'PERCENT') { %>
            <h2>Warning type = Percentage weight</h2>
            <h2>Warning limit = <%= details.thresholdValue %> %</h2>
            <% } %>

            <% if (details.hundredPercent == null) { %>
            <h2>100% weight = not set</h2>
            <% } else { %>
            <h2>100% weight = <%= details.hundredPercent %>g</h2>
            <% } %>
            <br>
            <% if (details.autocalc100Percent == 0) { %>
            <h2>Auto calculate 100% = Off</h2>
            <% } else { %>
            <h2>Auto calculate 100% = On</h2>
            <% } %>
            <% if (details.warning == 0) { %>
            <h2>Send warning = Off</h2>
            <% } else { %>
            <h2>Send warning = On</h2>
            <% } %>



        </div>

        <div class="item-notes">
            <h2>Item notes/ re-order information:</h2>

            <p><%= details.notes %></p>

        </div>
        <a href="/shelf-details/edit-item/<%= details.shelfPosition %>" class="edit-item">
            <h1>edit item details</h1>
        </a>
        <a href="" class="shelf-settings">
            <h1>change shelf settings</h1>
        </a>
        <a href="" class="new-item">
            <h1>Set up a new item on this shelf</h1>
        </a>
        <form class="delete-item" action="/delete/confirm" method="POST">
            <input type="hidden" name="shelfPos" value="<%= details.shelfPosition %> ">
            <button class="btn" type="submit">
                <h1>Delete Item and reset settings</h1>
            </button>
        </form>

    </div>

</main>
<%- include('../includes/footer.ejs')%>